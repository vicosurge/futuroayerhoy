---
layout: default
---

<div class="home">
  <div class="site-description">
    {{ site.description }}
  </div>

  <div class="content-sections">
    {% for section_data in site.literary_sections %}
      {% assign section_key = section_data[0] %}
      {% assign section = section_data[1] %}
      {% assign collection = site[section_key] %}
      
      <div class="section-card">
        <h3>{{ section.icon }} {{ section.title }}</h3>
        <p>{{ section.description }}</p>
        
        {% if collection.size > 0 %}
          <p><strong>{{ collection.size }}</strong> {% if collection.size == 1 %}texto{% else %}textos{% endif %} disponibles</p>
          
          <!-- Show latest 2 items from this collection -->
          {% assign latest_items = collection | sort: 'date' | reverse | limit: 2 %}
          {% if latest_items.size > 0 %}
            <div class="latest-items">
              <h4>Últimos:</h4>
              <ul>
                {% for item in latest_items %}
                  <li><a href="{{ item.url | relative_url }}">{{ item.title }}</a></li>
                {% endfor %}
              </ul>
            </div>
          {% endif %}
        {% else %}
          <p>Próximamente...</p>
        {% endif %}
        
        <a href="/{{ section_key }}/" class="section-link">Ver todos los {{ section.title | downcase }}</a>
      </div>
    {% endfor %}
  </div>

  <!-- Recent posts section -->
  {% assign all_content = '' | split: '' %}
  {% assign all_content = all_content | concat: site.posts %}
  {% if site.cuentos.size > 0 %}
    {% assign all_content = all_content | concat: site.cuentos %}
  {% endif %}
  {% if site.poesia.size > 0 %}
    {% assign all_content = all_content | concat: site.poesia %}
  {% endif %}
  {% if site.ensayos.size > 0 %}
    {% assign all_content = all_content | concat: site.ensayos %}
  {% endif %}
  {% if site.resenas.size > 0 %}
    {% assign all_content = all_content | concat: site.resenas %}
  {% endif %}
  {% if site.convocatorias.size > 0 %}
    {% assign all_content = all_content | concat: site.convocatorias %}
  {% endif %}
  
  {% assign sorted_content = all_content | sort: 'date' | reverse %}
  
  {% if sorted_content.size > 0 %}
    <div class="decorative-flourish"></div>
    
    <section class="recent-posts">
      <h2>Publicaciones Recientes</h2>
      <ul class="post-list">
        {% for item in sorted_content limit: 5 %}
          <li class="post-item">
            <div class="post-meta">
              <time datetime="{{ item.date | date_to_xmlschema }}">
                {{ item.date | date: "%d de %B, %Y" }}
              </time>
              {% if item.collection %}
                • <span class="post-category">{{ item.collection | capitalize }}</span>
              {% elsif item.category %}
                • <span class="post-category">{{ item.category | capitalize }}</span>
              {% endif %}
              {% if item.author %}
                • Por {{ item.author }}
              {% endif %}
            </div>
            <h3 class="post-title">
              <a href="{{ item.url | relative_url }}">{{ item.title | escape }}</a>
            </h3>
            {% if item.excerpt %}
              <div class="post-excerpt">
                {{ item.excerpt | strip_html | truncatewords: 30 }}
              </div>
            {% endif %}
          </li>
        {% endfor %}
      </ul>
      
      {% if sorted_content.size > 5 %}
        <p class="more-posts">
          <a href="/archivo/">Ver todos los textos →</a>
        </p>
      {% endif %}
    </section>
  {% endif %}
</div>
